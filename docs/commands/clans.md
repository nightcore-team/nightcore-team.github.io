# Команды системы кланов

---

## /clan info
!!! info ""
    Дает возможность посмотреть актуальную информацию о клане:

    - Название клана
    - Текущего лидера и его заместителей
    - Уровень
    - Опыт
    - Репутацию
    - Количество участников и максимальное количество с учетом улучшений
    - Максимальное количество заместителей с учетом улучшений

    Так же по кнопке "Список участников" вызывается список с упоминаниями всех участников клана

    ### Параметры
    - `clan` - Клан, информацию о котором вы хотите посмотреть.
      Выбор с помощью автокомплита, ввод не влияет на выводимые кланы.
      Как значение передается id клана

!!! warning "Возможные ошибки"
    - Клан может быть не найден в базе данных

---

## /clan leave
!!! info ""

    Покинуть текущий клан

    ### Необходимые права бота
    - `manage_roles` - для снятия роли клана

!!! warning "Возможные ошибки"
    - Вы являетесь лидером клана (покинуть - только через модерацию)

---

## /clan list
!!! info ""

    Посмотреть список всех кланов

!!! warning "Возможные ошибки"
    - На сервере не создано ни одного клана
 ---

## /clan top
!!! info ""

    Показать топ 10 кланов на сервере

    ### Параметры
    - `sort_by` - Выбор сортировки по участникам, репутации или дате создания

---

## /clan manage change_deputy
!!! info ""

    Добавить или снять заместителя в клане

    ### Доступ
    Только лидеру клана

    ### Параметры
    - `member` - Участник, которого вы хотите назначить/снять с должности заместителя. (упоминание или id)
    - `option` - действие (назначить / снять)

!!! note "Информация в логе"
    - `Клан` - название клана, в котором сняли заместителя
    - `Инциатор` - пользователь, совершивший действие (Упоминание + id)
    - `Снятие заместителя` - пользователь, снятый с должности заместителя (Упоминание)

!!! warning "Возможные ошибки"
    - Попытка изменения собственной роли
    - Выбранный пользователь не состоит в вашем клане
    - Достигнуто максимальное количество заместителей
    - Пользователь уже является заместителем (при выбранной опции "назначить")
    - Пользовать не является заместителем (при выбранной опции "снять")

---

## /clan manage create
!!! info ""

    Команда для создания нового клана.
    Создается роль клана и выдается выбранному лидеру клана

    ### Доступ:
    `CLANS_ACCESS`

    ### Необходимые права бота
    - `manage_roles`
    - `send_messages` - доступ к отправке сообщений в канал для логирования клановой системы (в случае если он настроен), обязательно для отправки лога создания
    - `manage_channels` - доступ к созданию кланового канала

    ### Параметры
    - `name` - название клана, ограничение в 100 символов
    - `leader` - будущий лидер (упоминание или id)
    - `color` - цвет в HEX формате, пример - #FF0000 для красного
    - `create_channel` (опциональное) - boolean значение, `True` - создать канал, `False` - не создавать. Default: `False`

!!! note "Информация в логе"
    - `Клан` - название клана, который был создан
    - `Инциатор` - пользователь, создавший клан (Упоминание + id)

!!! warning "Возможные ошибки"
    - Неверно введен цвет
    - Клан с введенным названием уже существует
    - Достигнуто максимальное количество ролей в гильдии (250)
    - Ошибка, связанная с бд (созданная роль клана удаляется)
    - Выбранный лидер уже состоит в другом клане (созданная роль клана удаляется)
    - Категория для создания канала не найдена/не настроена

---

## /clan manage create_channel
!!! info ""

    Команда для создания кланового канала.
    Создается текстовый канал под категорией из клановой конфигурации.

    ### Доступ:
    `CLANS_ACCESS`

    ### Необходимые права бота
    - `send_messages` - доступ к отправке сообщений в канал для логирования клановой системы (в случае если он настроен), обязательно для отправки лога создания
    - `manage_channels` - доступ к созданию кланового канала

    ### Параметры
    - `clan` - Клан, информацию о котором вы хотите посмотреть.
      Выбор с помощью автокомплита, ввод не влияет на выводимые кланы.
      Как значение передается id клана

!!! note "Информация в логе"
    - `Канал` - название канала, который был создан
    - `Инциатор` - пользователь, создавший канал (Упоминание + id)

!!! warning "Возможные ошибки"
    - Клан уже имеет свой канал
    - Категория для создания канала не найдена/не настроена

---

## /clan manage delete
!!! info ""

    Команда для удаления клана.
    Удаляется роль клана на сервере

    ### Доступ
    `CLANS_ACCESS`

    ### Необходимые права бота
    - `manage_roles` - обязательно для удаления роли клана
    - `send_messages` - доступ к отправке сообщений в канал для логирования клановой системы (в случае если он настроен), обязательно для отправки лога удаления

    ### Параметры
    - `clan` - Клан, который вы хотите удалить.
    Выбор с помощью автокомплита, ввод не влияет на выводимые кланы.
    Как значение передается id клана

!!! note "Информация в логе"
    - `Клан` - название клана, который был удален
    - `Инциатор` - пользователь, совершивший действие (Упоминание + id)

!!! warning "Возможные ошибки"
    - Выбранный клан не найден в базе данных

---

## /clan manage improvements
!!! info ""

    Команда для покупки клановых улучшений.

    Доступные улучшения:

    - Увеличение слотов на заместителя (+1), максимум слотов - 3
    - Увеличение слотов на участника (+10), максимум слотов - 100
    - х2 репутация за payday, максимальный множитель - 2

    ### Доступ
    Лидер клана или его заместители

    ### Параметры
    - `improvement` - улучшение

!!! note "Информация в логе"
    - `Клан` - название клана, в котором было куплено улучшение
    - `Инциатор` - пользователь, совершивший действие (Упоминание + id)
    - `Покупка улучшения` - название улучшения

!!! warning "Возможные ошибки"
    - Вы ввели неверный номер улучшения
    - Вы не состоите в клане или являетесь простым участником
    - У клана недостаточно репутации для покупки улучшения
    - Достигнут лимит улучшений

---

## /clan manage invite
!!! info ""

    Пригласить участника в клан.
    При после отправки команды в чат отправляется сообщение, с помощью которого пользователь может выбрать, принять или отклонить приглашение

    ### Доступ
    Лидер клана или его заместители

    ### Необходимые права бота
    - `manage_roles` - для выдачи роли приглашенному человеку
    - `send_messages` - доступ к отправке сообщений в канал для логирования клановой системы (в случае если он настроен), обязательно для отправки лога инвайта

    ### Параметры
    - `user` - пользователь, которого вы хотите пригласить (упоминание или id)

!!! note "Информация в логе"
    - `Клан` - название клана, в котором было совершено действие
    - `Инциатор` - пользователь, совершивший действие (Упоминание + id)
    - `Приглашение участника` - принятый в клан пользователь (Упоминание)

!!! warning "Возможные ошибки"
    - Вы не состоите в клане, или являетесь простым участником
    - Достигнуто максимальное количество участников
    - Выбранный пользователь уже состоит в клане

---

## /clan manage kick
!!! info ""

    Команда для кика участника из клана. Участнику не обязательно присутствовать на сервере для возможности его кикнуть.

    ### Доступ
    Лидер клана или его заместители

    ### Необходимые права бота
    - `manage_roles` - для снятия роли клана исключенному участнику
    - `send_messages` - доступ к отправке сообщений в канал для логирования клановой системы (в случае если он настроен), обязательно для отправки лога кика

    ### Параметры
    - `user` - пользователь, которого вы хотите кикнуть (упоминание или id)

!!! note "Информация в логе"
    - `Клан` - название клана, в котором было совершено действие
    - `Инциатор` - пользователь, совершивший действие (Упоминание + id)
    - `Исключение участника` - кикнутый из клана пользователь (Упоминание)

!!! warning "Возможные ошибки"
    - Вы хотите кикнуть пользователя, не состоящего в вашем клане

---

## /clan manage settings
!!! info ""

    Управление настройками клана.

    Доступные настройки:

    - Смена лидера
    - Смена названия
    - Изменение роли клана
    - Изменение канала клана

    ### Доступ
    `CLANS_ACCESS`

    ### Необходимые права бота
    - `send_messages` - доступ к отправке сообщений в канал для логирования клановой системы (в случае если он настроен), обязательно для отправки лога изменения клана
    - `manage_channels` - доступ к созданию кланового канала

    ### Параметры
    - `clan` - Клан, который вы хотите изменить.
    Выбор с помощью автокомплита, ввод не влияет на выводимые кланы.
    Как значение передается id клана
    - `new_leader` - новый лидер (упоминание или id), обязан состоять в этом клане
    - `new_role` - новая роль (упоминание или id)
    ограничения - не может быть с правами администратора, быть выше чем высшая роль бота
    - `new_name` - новое название, ограничение в 100 символов
    - `new_channel` - новый канал (упоминание или id)
    Старый канал будет удалён

!!! note "Информация в логе"
    - `Клан` - название клана, в котором было совершено действие
    - `Инциатор` - пользователь, совершивший действие (Упоминание + id)
    - `Изменение лидера` - лидер до смены -> после смены (Упоминание)
    только при введенном параметре `new_leader`
    - `Изменение роли` - роль до смены -> после смены (Упоминание)
    только при введенном параметре `new_role`
    - `Изменение названия` - название до смены -> после смены
    только при введенном параметре `new_name`
    - `Изменение канала` - канал до смены -> канал после смены
    только при введенном параметре `new_channel`

!!! warning "Возможные ошибки"
    - Клан не найден в базе данных
    - Выбранный лидер не состоит в этом клане
    - Выбранный параметр не отличается от текущего

---

## /clan manage shop
!!! info ""

    Команда для покупки предметов из кланового магазина.
    Создается ветка, в которой модераторы могут отклонить или одобрить покупку.
    Репутация списывается после одобрения покупки.

    Больше информации о ветке [здесь](../components/clans.md/#clanshopview)

    ### Доступ
    Лидер клана или его заместители

    ### Необходимые права бота
    - `create_private_threads` - для создание ветки
    - `send_messages_in_threads` - для отправки в ветку информации о покупке

    ### Параметры
    - `item` - товар, который вы хотите купить
    Выбор с помощью автокомплита, ввод не влияет на выводимые товары.
    Как значение передается название товара

!!! warning "Возможные ошибки"
    - Выбранный предмет не существует
    - Недостаточно репутации для покупки предмета
    - Канал для создания ветки не настроен в конфигурации
    - Канал для создания ветки настроен, но не найден на сервере